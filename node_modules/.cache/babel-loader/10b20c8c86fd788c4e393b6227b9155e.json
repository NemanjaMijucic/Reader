{"ast":null,"code":"import _asyncToGenerator from\"/Users/nemanjamijucic/Documents/React/Reader-app/reader-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nemanjamijucic/Documents/React/Reader-app/reader-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/nemanjamijucic/Documents/React/Reader-app/reader-app/node_modules/@babel/runtime/regenerator/index.js\";import React,{useContext,useState}from\"react\";import Button from\"../UI/Button\";import Input from\"../UI/Input\";import classes from\"./Header.module.css\";import{Link}from\"react-router-dom\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faArrowAltCircleRight,faSearch,faBookOpen}from\"@fortawesome/free-solid-svg-icons\";import BookContext from\"../../store/book-context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=function Header(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchString=_useState2[0],setSearchString=_useState2[1];var bookCtx=useContext(BookContext);//entered text in input\nvar searchStringHandler=function searchStringHandler(e){setSearchString(e.target.value);};//fetching books from API\nvar fetchBooks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var result,data,transformedBooks;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:props.getLoadingState(true);bookCtx.setErrorHandler(false);e.preventDefault();_context.prev=3;_context.next=6;return fetch(\"https://openlibrary.org/search.json?title=\".concat(searchString,\"&limit=20\"));case 6:result=_context.sent;_context.next=9;return result.json();case 9:data=_context.sent;console.log(data);if(data.docs.length){_context.next=13;break;}throw new Error(\"no books found\");case 13:transformedBooks=data.docs.map(function(book){return{readed:false,currentlyReading:false,title:book.title,author:book.author_name,cover:book.cover_i,id:book.edition_key[0],publishDate:book.publish_date[0],publisher:book.publisher[0],language:book.language};});props.getLoadingState(false);props.getBooks(transformedBooks);setSearchString(\"\");_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](3);if(_context.t0){props.getLoadingState(false);bookCtx.setErrorHandler(true);}case 22:case\"end\":return _context.stop();}}},_callee,null,[[3,19]]);}));return function fetchBooks(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"header\",{className:classes.header,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h1\",{children:[\"Reader App \",/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faBookOpen}),\" \"]})}),/*#__PURE__*/_jsx(\"div\",{className:classes.formholder,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:fetchBooks,children:[/*#__PURE__*/_jsx(Input,{className:classes.input,type:\"text\",name:\"search\",placeholder:\"type here to find book\",onChange:searchStringHandler,value:searchString}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",onClick:fetchBooks,className:classes.button,children:[\"Find Book \",/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faSearch})]})]})}),/*#__PURE__*/_jsx(Link,{to:\"/profile\",children:/*#__PURE__*/_jsxs(Button,{className:classes.link,children:[\"Go to profile \",/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faArrowAltCircleRight}),\" \"]})})]});};export default Header;","map":{"version":3,"names":["React","useContext","useState","Button","Input","classes","Link","FontAwesomeIcon","faArrowAltCircleRight","faSearch","faBookOpen","BookContext","Header","props","searchString","setSearchString","bookCtx","searchStringHandler","e","target","value","fetchBooks","getLoadingState","setErrorHandler","preventDefault","fetch","result","json","data","console","log","docs","length","Error","transformedBooks","map","book","readed","currentlyReading","title","author","author_name","cover","cover_i","id","edition_key","publishDate","publish_date","publisher","language","getBooks","header","formholder","input","button","link"],"sources":["/Users/nemanjamijucic/Documents/React/Reader-app/reader-app/src/components/Layout/Header.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport Button from \"../UI/Button\";\nimport Input from \"../UI/Input\";\nimport classes from \"./Header.module.css\";\nimport { Link } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faArrowAltCircleRight,\n  faSearch,\n  faBookOpen,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport BookContext from \"../../store/book-context\";\n\nconst Header = (props) => {\n  const [searchString, setSearchString] = useState(\"\");\n  const bookCtx = useContext(BookContext);\n\n  //entered text in input\n  const searchStringHandler = (e) => {\n    setSearchString(e.target.value);\n  };\n\n  //fetching books from API\n  const fetchBooks = async (e) => {\n    props.getLoadingState(true);\n    bookCtx.setErrorHandler(false);\n    e.preventDefault();\n    try {\n      const result = await fetch(\n        `https://openlibrary.org/search.json?title=${searchString}&limit=20`\n      );\n\n      const data = await result.json();\n      console.log(data);\n      if (!data.docs.length) {\n        throw new Error(\"no books found\");\n      }\n\n      const transformedBooks = data.docs.map((book) => {\n        return {\n          readed: false,\n          currentlyReading: false,\n          title: book.title,\n          author: book.author_name,\n          cover: book.cover_i,\n          id: book.edition_key[0],\n          publishDate: book.publish_date[0],\n          publisher: book.publisher[0],\n          language: book.language,\n        };\n      });\n\n      props.getLoadingState(false);\n      props.getBooks(transformedBooks);\n      setSearchString(\"\");\n    } catch (error) {\n      if (error) {\n        props.getLoadingState(false);\n\n        bookCtx.setErrorHandler(true);\n      }\n    }\n  };\n\n  return (\n    <header className={classes.header}>\n      <div>\n        <h1>\n          Reader App <FontAwesomeIcon icon={faBookOpen} />{\" \"}\n        </h1>\n      </div>\n      <div className={classes.formholder}>\n        <form onSubmit={fetchBooks}>\n          <Input\n            className={classes.input}\n            type=\"text\"\n            name=\"search\"\n            placeholder=\"type here to find book\"\n            onChange={searchStringHandler}\n            value={searchString}\n          />\n          <Button type=\"submit\" onClick={fetchBooks} className={classes.button}>\n            Find Book <FontAwesomeIcon icon={faSearch} />\n          </Button>\n        </form>\n      </div>\n\n      <Link to=\"/profile\">\n        <Button className={classes.link}>\n          Go to profile <FontAwesomeIcon icon={faArrowAltCircleRight} />{\" \"}\n        </Button>\n      </Link>\n    </header>\n  );\n};\n\nexport default Header;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}