{"ast":null,"code":"import _toConsumableArray from\"/Users/nemanjamijucic/Documents/React/Reader-app/reader-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/nemanjamijucic/Documents/React/Reader-app/reader-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var BookContext=/*#__PURE__*/React.createContext({currReadingbooks:[],readedBooks:[],showModal:\"\",idForModal:\"\",error:\"\",setBooksToLS:function setBooksToLS(){},addToReadedBooksList:function addToReadedBooksList(){},showModalHandler:function showModalHandler(){},getIdForModal:function getIdForModal(){},setErrorHandler:function setErrorHandler(){}});export var BookContextProvider=function BookContextProvider(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),currentlyReading=_useState2[0],setCurrentlyReading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),readedBooks=_useState4[0],setReadedBooks=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showModal=_useState6[0],setShowModal=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),idForModal=_useState8[0],setIdForModal=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var addToReadingList=function addToReadingList(item){item.currentlyReading=true;var readingBooks=[];if(!localStorage.getItem(\"books\")){readingBooks.push(item);localStorage.setItem(\"books\",JSON.stringify(readingBooks));}if(localStorage.getItem(\"books\")!==null){readingBooks=JSON.parse(localStorage.getItem(\"books\"));setCurrentlyReading(readingBooks);var found=readingBooks.some(function(book){return book.title===item.title;});if(!found){readingBooks=[].concat(_toConsumableArray(readingBooks),[item]);localStorage.setItem(\"books\",JSON.stringify(readingBooks));}}setCurrentlyReading(readingBooks);};//function for readed books\nvar addToReadedBooksList=function addToReadedBooksList(item){var readedBooksList=[];item.readed=true;if(!localStorage.getItem(\"readedBooks\")){readedBooksList.push(item);localStorage.setItem(\"readedBooks\",JSON.stringify(readedBooksList));}if(localStorage.getItem(\"readedBooks\")){readedBooksList=JSON.parse(localStorage.getItem(\"readedBooks\"));var found=readedBooksList.some(function(book){return book.title===item.title;});if(!found){readedBooksList=[].concat(_toConsumableArray(readedBooksList),[item]);localStorage.setItem(\"readedBooks\",JSON.stringify(readedBooksList));}}setReadedBooks(readedBooksList);//deleteing from currently reading array in LS when clicked on readed book\nif(currentlyReading){setCurrentlyReading(currentlyReading.filter(function(book){return book.id!==item.id;}));localStorage.removeItem(\"books\");localStorage.setItem(\"books\",JSON.stringify(currentlyReading));}};//function for showing modal with book info\nvar showModalHandler=function showModalHandler(){setShowModal(function(prevState){return!prevState;});};var getIdForModal=function getIdForModal(id){setIdForModal(id);};useEffect(function(){if(localStorage.getItem(\"books\")){setCurrentlyReading(JSON.parse(localStorage.getItem(\"books\")));}if(localStorage.getItem(\"readedBooks\")){setReadedBooks(JSON.parse(localStorage.getItem(\"readedBooks\")));}},[]);// //function for showing error\n// const setErrorHandler = () => {\n//   setError(true);\n// };\nreturn/*#__PURE__*/_jsx(BookContext.Provider,{value:{currReadingbooks:currentlyReading,readedBooks:readedBooks,showModal:showModal,idForModal:idForModal,error:error,setBooksToLS:addToReadingList,addToReadedBooksList:addToReadedBooksList,showModalHandler:showModalHandler,getIdForModal:getIdForModal,setErrorHandler:setError},children:props.children});};export default BookContext;","map":{"version":3,"names":["React","useState","useEffect","BookContext","createContext","currReadingbooks","readedBooks","showModal","idForModal","error","setBooksToLS","addToReadedBooksList","showModalHandler","getIdForModal","setErrorHandler","BookContextProvider","props","currentlyReading","setCurrentlyReading","setReadedBooks","setShowModal","setIdForModal","setError","addToReadingList","item","readingBooks","localStorage","getItem","push","setItem","JSON","stringify","parse","found","some","book","title","readedBooksList","readed","filter","id","removeItem","prevState","children"],"sources":["/Users/nemanjamijucic/Documents/React/Reader-app/reader-app/src/store/book-context.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nconst BookContext = React.createContext({\n  currReadingbooks: [],\n  readedBooks: [],\n  showModal: \"\",\n  idForModal: \"\",\n  error: \"\",\n  setBooksToLS: () => {},\n  addToReadedBooksList: () => {},\n  showModalHandler: () => {},\n  getIdForModal: () => {},\n  setErrorHandler: () => {},\n});\n\nexport const BookContextProvider = (props) => {\n  const [currentlyReading, setCurrentlyReading] = useState([]);\n  const [readedBooks, setReadedBooks] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  const [idForModal, setIdForModal] = useState(\"\");\n  const [error, setError] = useState(false);\n\n  const addToReadingList = (item) => {\n    item.currentlyReading = true;\n\n    let readingBooks = [];\n    if (!localStorage.getItem(\"books\")) {\n      readingBooks.push(item);\n      localStorage.setItem(\"books\", JSON.stringify(readingBooks));\n    }\n\n    if (localStorage.getItem(\"books\") !== null) {\n      readingBooks = JSON.parse(localStorage.getItem(\"books\"));\n      setCurrentlyReading(readingBooks);\n      const found = readingBooks.some((book) => book.title === item.title);\n      if (!found) {\n        readingBooks = [...readingBooks, item];\n        localStorage.setItem(\"books\", JSON.stringify(readingBooks));\n      }\n    }\n    setCurrentlyReading(readingBooks);\n  };\n\n  //function for readed books\n  const addToReadedBooksList = (item) => {\n    let readedBooksList = [];\n    item.readed = true;\n    if (!localStorage.getItem(\"readedBooks\")) {\n      readedBooksList.push(item);\n      localStorage.setItem(\"readedBooks\", JSON.stringify(readedBooksList));\n    }\n\n    if (localStorage.getItem(\"readedBooks\")) {\n      readedBooksList = JSON.parse(localStorage.getItem(\"readedBooks\"));\n      const found = readedBooksList.some((book) => book.title === item.title);\n\n      if (!found) {\n        readedBooksList = [...readedBooksList, item];\n        localStorage.setItem(\"readedBooks\", JSON.stringify(readedBooksList));\n      }\n    }\n\n    setReadedBooks(readedBooksList);\n\n    //deleteing from currently reading array in LS when clicked on readed book\n    if (currentlyReading) {\n      setCurrentlyReading(\n        currentlyReading.filter((book) => book.id !== item.id)\n      );\n      localStorage.removeItem(\"books\");\n      localStorage.setItem(\"books\", JSON.stringify(currentlyReading));\n    }\n  };\n\n  //function for showing modal with book info\n  const showModalHandler = () => {\n    setShowModal((prevState) => !prevState);\n  };\n\n  const getIdForModal = (id) => {\n    setIdForModal(id);\n  };\n\n  useEffect(() => {\n    if (localStorage.getItem(\"books\")) {\n      setCurrentlyReading(JSON.parse(localStorage.getItem(\"books\")));\n    }\n\n    if (localStorage.getItem(\"readedBooks\")) {\n      setReadedBooks(JSON.parse(localStorage.getItem(\"readedBooks\")));\n    }\n  }, []);\n\n  // //function for showing error\n  // const setErrorHandler = () => {\n  //   setError(true);\n  // };\n\n  return (\n    <BookContext.Provider\n      value={{\n        currReadingbooks: currentlyReading,\n        readedBooks: readedBooks,\n        showModal: showModal,\n        idForModal: idForModal,\n        error: error,\n        setBooksToLS: addToReadingList,\n        addToReadedBooksList: addToReadedBooksList,\n        showModalHandler: showModalHandler,\n        getIdForModal: getIdForModal,\n        setErrorHandler: setError,\n      }}\n    >\n      {props.children}\n    </BookContext.Provider>\n  );\n};\n\nexport default BookContext;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}